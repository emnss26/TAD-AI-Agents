# ===================================================================
# Archivo de patrones para la NLU del Agente de Revit
# Cada slot DEBE estar en una sola línea.
# ===================================================================

slots:
  # --- 1. Dimensiones y Cantidades ---
  dimension_length: '\b(\d+(?:\.\d+)?)\s*(?:m|metros?|ft|pie[s]?|''|"|in|pulgada[s]?)\s*(?:de\s*)?(?:largo|longitud)\b'
  dimension_height: '\b(\d+(?:\.\d+)?)\s*(?:m|metros?|ft|pie[s]?|''|"|in|pulgada[s]?)\s*(?:de\s*)?(?:alto|altura)\b'
  dimension_width: '\b(\d+(?:\.\d+)?)\s*(?:m|metros?|ft|pie[s]?|''|"|in|pulgada[s]?)\s*(?:de\s*)?(?:ancho|anchura)\b'
  dimension_thickness: '\b(?:espesor|grosor)\s*(?:de)?\s*(\d+(?:\.\d+)?)\s*(cm|mm|m|metros?|ft|pie[s]?|''|"|in|pulgada[s]?)\b'
  dimension_diameter: '\b(?:diámetro|diametro)\s*(?:de)?\s*(\d+(?:\.\d+)?)\s*(mm|cm|m|metros?|ft|pie[s]?|''|"|in|pulgada[s]?)\b'
  dimension_spacing: '\b(?:separados|separación\s*de|espaciados)\s*(\d+(?:\.\d+)?)\s*(m|metros?|ft|pie[s]?|'')\b'
  dimension_offset: '\b(?:desfase|offset)\s*(?:de)?\s*(-?\d+(?:\.\d+)?)\s*(m|metros?|cm|mm|ft|pie[s]?|''|"|in|pulgada[s]?)\b'
  dimension_compound: '\b(\d+(?:\.\d+)?)\s*(?:x|×|por)\s*(\d+(?:\.\d+)?)\s*(?:m|metros?|ft|pie[s]?|'')?\b'
  dimension_generic_with_unit: '\b(\d+(?:\.\d+)?)\s*(m|metros?|cm|mm|ft|pie[s]?|''|"|in|pulgada[s]?)\b'
  quantity: '\b(crea|genera|dibuja|coloca)\s*(\d+)\s*(ejes?|muros?|columnas?|vigas?|niveles?|planos?|worksets?)\b'
  angle_degrees: '\b(-?\d+(?:\.\d+)?)\s*(?:°|grados)\b'

  # --- 2. Identificadores y Nombres ---
  element_category: '\b(muros?|paredes?|puertas?|ventanas?|pilares?|columnas?|suelos?|pisos?|techos?|cubiertas?|vigas?|ejes?|rejillas?|tuberías?|ductos?|mobiliario|barandales?|cimentaciones?|losas?|planos?|hojas?|familias?|tablas?|vínculos?|líneas?|habitaciones?|cuartos?|espacios?|worksets?)\b'
  level_name: '\b(?:en\s*el|del)?\s*(?:nivel|planta)\s*[''"]?([a-zA-Z0-9\s_\.\-]+)[''"]?\b'
  view_name: '\b(?:en\s*la\s*)?vista\s*[''"]([^''"]+)[''"]\b'
  family_type: '\b(?:del\s*tipo|tipo|familia)\s*[''"]([^''"]+)[''"]\b'
  material_name: '\b(?:material|con\s*el\s*color|con)\s*[''"]([^''"]+)[''"]\b'
  color_name: '\b(roj[oa]|azul|verde|amarill[oa]|blanc[oa]|negr[oa])\b'
  parameter_name: '\b(?:el\s*parámetro|parámetro|la\s*propiedad|propiedad)\s*[''"]([^''"]+)[''"]\b'
  parameter_value: '\b(?:a|sea|es|con\s*valor\s*de|igual\s*a)\s+([''"]?[^''"]+[''"]?)\b'
  new_name_definition: '\b(?:llamado|nómbralo|con\s*el\s*nombre|nombre)\s*[''"]([^''"]+)[''"]\b'
  name_prefix: '\b(?:prefijo|que\s*empiecen\s*con)\s*[''"]([^''"]+)[''"]\b'
  name_suffix: '\b(?:sufijo|que\s*terminen\s*con)\s*[''"]([^''"]+)[''"]\b'
  axis_identifier: '\beje[s]?\s*([A-Z0-9\.]+)\b'
  file_path: '([a-zA-Z]:\\[\\\S|*\S]?.*?\.(rfa|dwg|rvt|ifc|csv|nwc|txt))'

  # --- 3. Ubicación y Geometría ---
  coordinates_xy: '\b(?:en|a|en\s*la\s*posición|en\s*las\s*coordenadas)\s*\(?\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)?\b|\bX\s*=\s*(-?\d+(?:\.\d+)?)\s*,\s*Y\s*=\s*(-?\d+(?:\.\d+)?)\b'
  coordinates_xyz: '\(?\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*,\s*(-?\d+(?:\.\d+)?)\s*\)?'
  orientation: '\b(horizontales?|verticales?|norte|sur|este|oeste|horizontal|vertical|longitudinal)\b'
  level_elevation: '\b(?:a|con|en)\s+(?:una\s+)?(?:elevación|altura)\s+(?:de\s*)?(-?\d+(?:\.\d+)?)\s*(m|metros?|ft|pie[s]?)?\b'
  direction_vector: '\b(?:hacia|en\s*la\s*dirección)\s+(arriba|abajo|izquierda|derecha|adelante|atrás)\b'

  # --- 4. Atributos, Contexto y Selección ---
  structural_usage: '\b(estructural(?:es)?|de\s*carga|de\s*corte|combinado)\b'
  action_on_selection: '\b(seleccionad[oa]s?|por\s*el\s*usuario|que\s*seleccione|elemento\s*dado)\b'
  active_context: '\b(vista\s*activa|modelo\s*actual|proyecto\s*actual|documento\s*actual)\b'
  all_elements: '\b(tod[oa]s?\s*l[oa]s?)\b'
  target_host: '\b(en\s*un\s*muro|en\s*una\s*pared|en\s*una\s*losa|en\s*un\s*suelo|en\s*una\s*escalera)\b'
  file_format: '\b(NWC|IFC|CSV|PDF|DWG|SAT)\b'

intents:
  # --- INTENCIONES DE CREACIÓN (Muy Específicas) ---
  CreateWall:
    patterns:
      - '\b(crea|dibuja|construye|genera|haz|build|create|draw)\s+(un|una|el|la|a)?\s*(muro|pared|wall)\b'
      - '\b(muro|pared|wall)\s+entre\b'
  InsertFamilyInstance:
    patterns:
      - '\b(inserta|coloca|pon|sitúa|ubica|añade|place|insert|add|position)\s'
      - '\b(ventana|puerta|window|door|columna|pilar|viga|beam|truss|celosía|mobiliario|mueble)\b'
  CreateLevel:
    patterns:
      - '\b(crea|genera|añade|create|add)\s+(un|el|a)?\s*nuev[oa]\s*(nivel|planta|level)\b'
  CreateGrid:
    patterns:
      - '\b(crea|genera|dibuja|create|draw)\s+\d*\s*(ejes?|rejillas?|grids?)\b'
  CreateFloor:
    patterns:
      - '\b(crea|genera|dibuja|mod?ela|create|draw|model)\s+(un|el|a)?\s*(suelo|piso|losa|placa|floor|slab)\b'
  CreateSchedule:
    patterns:
      - '\b(crea|genera|create|generate)\s+(una|la|a)?\s*(tabla|planificación|schedule|cómputo)\b'
  CreateWorkset:
    patterns:
      - '\b(crea|genera|create|generate)\s+\d*\s*(workset|subproyecto)\b'
  CreateOpening:
    patterns:
      - '\b(crea|haz|genera|create|make)\s+(un|una|a|an)?\s*(agujero|hueco|apertura|opening|shaft)\b'
  CreateDimension:
    patterns:
      - '\b(crea|coloca|añade|create|add)\s+(una|a)?\s*(cota|dimensión|dimension)\b'
  TagElement:
    patterns:
      - '\b(etiqueta|taguea|tag)\b'

  # --- INTENCIONES DE MODIFICACIÓN ---
  SetElementParameter:
    patterns:
      - '\b(cambia|establece|modifica|asigna|set|define|change)\s+(el|la|the)?\s*(parámetro|propiedad|comentario|marca|valor|parameter|property|comment|mark|value)\b'
      - '\b(parámetro|comentario|marca|parameter|comment|mark)\s+(a|to)\b'
  ChangeElementType:
    patterns:
      - '\b(cambia|modifica|change)\s+(el|la|the)?\s*tip[oa]\b'
  RenameElements:
    patterns:
      - '\b(renombra|cambia\s+el\s+nombre|rename)\b'
  MoveElement:
    patterns:
      - '\b(mueve|desplaza|move)\b'
  RotateElement:
    patterns:
      - '\b(rota|gira|vira|rotate)\b'
  PinElements:
    patterns:
      - '\b(fija|bloquea|pin|lock)\b'
  UnpinElements:
    patterns:
      - '\b(desbloquea|desfija|unpin|unlock)\b'
  DeleteElements:
    patterns:
      - '\b(borra|elimina|quita|suprime|delete|remove)\b'
  DuplicateType:
    patterns:
      - '\b(duplica|clona|duplicate|clone)\s+(el|la|the)?\s*tip[oa]\b'
  JoinGeometry:
    patterns:
      - '\b(une|junta|unir|join)\s+(la|the)?\s*geometr(í|i)a\s'
  ChangeElementVisibility:
    patterns:
      - '\b(oculta|apaga|esconde|hide)\b'
      - '\b(muestra|enciende|visibiliza|unhide|show)\b'

  # --- INTENCIONES DE CONSULTA Y GESTIÓN ---
  QueryElements:
    patterns:
      - '\b(cuántos|cuántas|lista|dime|encuentra|selecciona|busca|get|how\s+many|list|find|select)\b'
      - '\b(seleccionar)\s+tod[oa]s\s+l[oa]s\b'
  ExportFile:
    patterns:
      - '\b(exporta|export)\b'
  SyncWithCentral:
    patterns:
      - '\b(sincroniza|sync)\b'

  # --- INTENCIONES GENÉRICAS (FALLBACK) ---
  # Se evalúan al final si nada de lo anterior coincide.
  Query:
    patterns:
      - '\b(qué|cuál|dónde|what|which|where)\b'
  Modify:
    patterns:
      - '\b(modifica|ajusta|cambia|modify|adjust|change)\b'
  Create:
    patterns:
      - '\b(crea|genera|dibuja|construye|create|generate|draw|build)\b'